"use strict";var _createClass=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||false;i.configurable=true;if("value"in i)i.writable=true;Object.defineProperty(e,i.key,i)}}return function(e,t,n){if(t)i(e.prototype,t);if(n)i(e,n);return e}}();function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var Dropload=function(){function t(e){_classCallCheck(this,t);this._windowHeight=0;this._containerHeight=0;this._isScrollB=false;this._distanceEnd=e.distanceEnd?e.distanceEnd:100;this.callback=e.success?e.success:function(){throw new Error("请添加触底时回调函数！")};this.init();this.listenWindowScroll();this.listenResize()}_createClass(t,[{key:"init",value:function e(){this._windowHeight=this.initWindoHeight();this._containerHeight=this.initContainerHeight()}},{key:"initWindoHeight",value:function e(){var t=0;if(document.body.clientHeight&&document.documentElement.clientHeight){t=Math.min(document.body.clientHeight,document.documentElement.clientHeight)}else{t=Math.max(document.body.clientHeight,document.documentElement.clientHeight)}return t}},{key:"initContainerHeight",value:function e(){var t=document.querySelector(".container");var n=0;try{n=t.offsetHeight}catch(e){throw new Error("请添加添加类为container的容器！")}return n}},{key:"refresh",value:function e(){this.init();this._isScrollB=false}},{key:"listenWindowScroll",value:function e(){var t=this;window.addEventListener("scroll",function(){var e=document.documentElement.scrollTop||document.body.scrollTop;if(e+t._windowHeight>=t._containerHeight-t._distanceEnd){if(!t._isScrollB){t.callback()}t._isScrollB=true}})}},{key:"listenResize",value:function e(){var t=this;window.addEventListener("resize",function(){t.init()})}}]);return t}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRyb3BMb2FkLmpzIl0sIm5hbWVzIjpbIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiRHJvcGxvYWQiLCJvcHRpb25zIiwidGhpcyIsIl93aW5kb3dIZWlnaHQiLCJfY29udGFpbmVySGVpZ2h0IiwiX2lzU2Nyb2xsQiIsIl9kaXN0YW5jZUVuZCIsImRpc3RhbmNlRW5kIiwiY2FsbGJhY2siLCJzdWNjZXNzIiwiRXJyb3IiLCJpbml0IiwibGlzdGVuV2luZG93U2Nyb2xsIiwibGlzdGVuUmVzaXplIiwidmFsdWUiLCJpbml0V2luZG9IZWlnaHQiLCJpbml0Q29udGFpbmVySGVpZ2h0Iiwid0hlaWdodCIsImRvY3VtZW50IiwiYm9keSIsImNsaWVudEhlaWdodCIsImRvY3VtZW50RWxlbWVudCIsIk1hdGgiLCJtaW4iLCJtYXgiLCJjb250YWluZXJfZWwiLCJxdWVyeVNlbGVjdG9yIiwib2Zmc2V0SCIsIm9mZnNldEhlaWdodCIsImVyciIsInJlZnJlc2giLCJzZWxmIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFRvcCIsIl90aGlzIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUlBLGFBQWUsV0FBYyxTQUFTQyxFQUFpQkMsRUFBUUMsR0FBUyxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLElBQUlFLEVBQWFILEVBQU1DLEdBQUlFLEVBQVdDLFdBQWFELEVBQVdDLFlBQWMsTUFBT0QsRUFBV0UsYUFBZSxLQUFNLEdBQUksVUFBV0YsRUFBWUEsRUFBV0csU0FBVyxLQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixPQUFPLFNBQVVPLEVBQWFDLEVBQVlDLEdBQWUsR0FBSUQsRUFBWWIsRUFBaUJZLEVBQVlHLFVBQVdGLEdBQWEsR0FBSUMsRUFBYWQsRUFBaUJZLEVBQWFFLEdBQWMsT0FBT0YsR0FBN2dCLEdBRW5CLFNBQVNJLGdCQUFnQkMsRUFBVUwsR0FBZSxLQUFNSyxhQUFvQkwsR0FBYyxDQUFFLE1BQU0sSUFBSU0sVUFBVSxzQ0FPaEgsSUFBSUMsU0FBVyxXQUNiLFNBQVNBLEVBQVNDLEdBQ2hCSixnQkFBZ0JLLEtBQU1GLEdBS3RCRSxLQUFLQyxjQUFnQixFQUVyQkQsS0FBS0UsaUJBQW1CLEVBRXhCRixLQUFLRyxXQUFhLE1BR2xCSCxLQUFLSSxhQUFlTCxFQUFRTSxZQUFjTixFQUFRTSxZQUFjLElBRWhFTCxLQUFLTSxTQUFXUCxFQUFRUSxRQUFVUixFQUFRUSxRQUFVLFdBQ2xELE1BQU0sSUFBSUMsTUFBTSxnQkFJbEJSLEtBQUtTLE9BR0xULEtBQUtVLHFCQUVMVixLQUFLVyxlQUdQakMsYUFBYW9CLEVBQVUsQ0FBQyxDQUN0QlIsSUFBSyxPQUNMc0IsTUFBTyxTQUFTSCxJQUNkVCxLQUFLQyxjQUFnQkQsS0FBS2Esa0JBQzFCYixLQUFLRSxpQkFBbUJGLEtBQUtjLHdCQUs5QixDQUNEeEIsSUFBSyxrQkFDTHNCLE1BQU8sU0FBU0MsSUFDZCxJQUFJRSxFQUFVLEVBQ2QsR0FBSUMsU0FBU0MsS0FBS0MsY0FBZ0JGLFNBQVNHLGdCQUFnQkQsYUFBYyxDQUN2RUgsRUFBVUssS0FBS0MsSUFBSUwsU0FBU0MsS0FBS0MsYUFBY0YsU0FBU0csZ0JBQWdCRCxrQkFDbkUsQ0FDTEgsRUFBVUssS0FBS0UsSUFBSU4sU0FBU0MsS0FBS0MsYUFBY0YsU0FBU0csZ0JBQWdCRCxjQUcxRSxPQUFPSCxJQUtSLENBQ0R6QixJQUFLLHNCQUNMc0IsTUFBTyxTQUFTRSxJQUNkLElBQUlTLEVBQWVQLFNBQVNRLGNBQWMsY0FDMUMsSUFBSUMsRUFBVSxFQUNkLElBQ0VBLEVBQVVGLEVBQWFHLGFBQ3ZCLE1BQU9DLEdBQ1AsTUFBTSxJQUFJbkIsTUFBTSx3QkFHbEIsT0FBT2lCLElBS1IsQ0FDRG5DLElBQUssVUFDTHNCLE1BQU8sU0FBU2dCLElBQ2Q1QixLQUFLUyxPQUNMVCxLQUFLRyxXQUFhLFFBS25CLENBQ0RiLElBQUsscUJBQ0xzQixNQUFPLFNBQVNGLElBQ2QsSUFBSW1CLEVBQU83QixLQUNYOEIsT0FBT0MsaUJBQWlCLFNBQVUsV0FDaEMsSUFBSUMsRUFBWWhCLFNBQVNHLGdCQUFnQmEsV0FBYWhCLFNBQVNDLEtBQUtlLFVBR3BFLEdBQUlBLEVBQVlILEVBQUs1QixlQUFpQjRCLEVBQUszQixpQkFBbUIyQixFQUFLekIsYUFBYyxDQUMvRSxJQUFLeUIsRUFBSzFCLFdBQVksQ0FFcEIwQixFQUFLdkIsV0FFUHVCLEVBQUsxQixXQUFhLFVBT3ZCLENBQ0RiLElBQUssZUFDTHNCLE1BQU8sU0FBU0QsSUFDZCxJQUFJc0IsRUFBUWpDLEtBRVo4QixPQUFPQyxpQkFBaUIsU0FBVSxXQUNoQ0UsRUFBTXhCLGFBS1osT0FBT1gsRUE3R00iLCJmaWxlIjoiZHJvcExvYWQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG4vKiogMjAyMC05LTI0IGx3bFxyXG4gKiAx44CB6I635Y+W56qX5Y+j6auY5bqmXHJcbiAqIDLjgIHojrflj5Zjb250YWluZXLpq5jluqZcclxuICogM+OAgeiOt+WPlua7muWKqOi3neemu3Njcm9sbFRvcCArIOeql+WPo+i3neemuyA+IGNvbnRhaW5lcumrmOW6puaXtuinpuWPkeWKoOi9veabtOWkmlxyXG4gKi9cbnZhciBEcm9wbG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gRHJvcGxvYWQob3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcm9wbG9hZCk7XG5cbiAgICAvLyDliJ3lp4vljJbkvY3nva5cbiAgICAvLyB0aGlzLl9pbml0RGlzdGFuY2UgPSAwXG4gICAgLy8g56qX5Y+j6auY5bqmXG4gICAgdGhpcy5fd2luZG93SGVpZ2h0ID0gMDtcbiAgICAvLyBjb250YWluZXLpq5jluqZcbiAgICB0aGlzLl9jb250YWluZXJIZWlnaHQgPSAwO1xuICAgIC8vIOaYr+WQpuinpuW6lVxuICAgIHRoaXMuX2lzU2Nyb2xsQiA9IGZhbHNlO1xuXG4gICAgLy8g6Led56a75bqV6YOo5aSa5bCR6Led56a76Kem5Y+RXG4gICAgdGhpcy5fZGlzdGFuY2VFbmQgPSBvcHRpb25zLmRpc3RhbmNlRW5kID8gb3B0aW9ucy5kaXN0YW5jZUVuZCA6IDEwMDtcbiAgICAvLyDop6blupXml7Yg6Kem5Y+RXG4gICAgdGhpcy5jYWxsYmFjayA9IG9wdGlvbnMuc3VjY2VzcyA/IG9wdGlvbnMuc3VjY2VzcyA6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcign6K+35re75Yqg6Kem5bqV5pe25Zue6LCD5Ye95pWw77yBJyk7XG4gICAgfTtcblxuICAgIC8vIOWIneWni+WMlua1geeoi1xuICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgLy8g55uR5ZCs5rua5YqoXG4gICAgdGhpcy5saXN0ZW5XaW5kb3dTY3JvbGwoKTtcbiAgICAvLyDnm5HlkKznqpflj6PmlLnlj5hcbiAgICB0aGlzLmxpc3RlblJlc2l6ZSgpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKERyb3Bsb2FkLCBbe1xuICAgIGtleTogJ2luaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgdGhpcy5fd2luZG93SGVpZ2h0ID0gdGhpcy5pbml0V2luZG9IZWlnaHQoKTtcbiAgICAgIHRoaXMuX2NvbnRhaW5lckhlaWdodCA9IHRoaXMuaW5pdENvbnRhaW5lckhlaWdodCgpO1xuICAgIH1cblxuICAgIC8vIOWIneWni+WMlueql+WPo+mrmOW6plxuXG4gIH0sIHtcbiAgICBrZXk6ICdpbml0V2luZG9IZWlnaHQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0V2luZG9IZWlnaHQoKSB7XG4gICAgICB2YXIgd0hlaWdodCA9IDA7XG4gICAgICBpZiAoZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICB3SGVpZ2h0ID0gTWF0aC5taW4oZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd0hlaWdodCA9IE1hdGgubWF4KGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCfmtY/op4jlmajnqpflj6Ppq5jluqYnLCB3SGVpZ2h0KVxuICAgICAgcmV0dXJuIHdIZWlnaHQ7XG4gICAgfVxuXG4gICAgLy8g5Yid5aeL5YyWY29udGFpbmVy6auY5bqmXG5cbiAgfSwge1xuICAgIGtleTogJ2luaXRDb250YWluZXJIZWlnaHQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0Q29udGFpbmVySGVpZ2h0KCkge1xuICAgICAgdmFyIGNvbnRhaW5lcl9lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXInKTtcbiAgICAgIHZhciBvZmZzZXRIID0gMDtcbiAgICAgIHRyeSB7XG4gICAgICAgIG9mZnNldEggPSBjb250YWluZXJfZWwub2Zmc2V0SGVpZ2h0O1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIuivt+a3u+WKoOa3u+WKoOexu+S4umNvbnRhaW5lcueahOWuueWZqO+8gVwiKTtcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCdjb250YWluZXLpq5jluqYnLCBvZmZzZXRIKVxuICAgICAgcmV0dXJuIG9mZnNldEg7XG4gICAgfVxuXG4gICAgLy8g6YeN5paw6K6h566Xd2luZG9356qX5Y+j5a695bqm5ZKM6auY5bqmXG5cbiAgfSwge1xuICAgIGtleTogJ3JlZnJlc2gnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWZyZXNoKCkge1xuICAgICAgdGhpcy5pbml0KCk7XG4gICAgICB0aGlzLl9pc1Njcm9sbEIgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyDnm5HlkKzmu5rliqjmnaHmu5rliqhcblxuICB9LCB7XG4gICAga2V5OiAnbGlzdGVuV2luZG93U2Nyb2xsJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gbGlzdGVuV2luZG93U2Nyb2xsKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHNjcm9sbFRvcClcblxuICAgICAgICBpZiAoc2Nyb2xsVG9wICsgc2VsZi5fd2luZG93SGVpZ2h0ID49IHNlbGYuX2NvbnRhaW5lckhlaWdodCAtIHNlbGYuX2Rpc3RhbmNlRW5kKSB7XG4gICAgICAgICAgaWYgKCFzZWxmLl9pc1Njcm9sbEIpIHtcbiAgICAgICAgICAgIC8vIOinpuW6leaXtiDop6blj5FcbiAgICAgICAgICAgIHNlbGYuY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZi5faXNTY3JvbGxCID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8g55uR5ZCs56qX5Y+j5aSn5bCP5pS55Y+Y5pe26YeN5paw6K6h566XXG5cbiAgfSwge1xuICAgIGtleTogJ2xpc3RlblJlc2l6ZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxpc3RlblJlc2l6ZSgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmluaXQoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBEcm9wbG9hZDtcbn0oKTsiXX0=
